<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<body><h2>주문이 완료되었습니다!</h2>
<p>
    주문번호&nbsp;<b th:text="${order.id}"></b><br/>
    주문시각&nbsp;<span th:text="${order.orderedAt}"></span><br/>
    배송지&nbsp;<span th:text="${order.address}"></span>
</p>

<h3>주문 내역</h3>
<table border="1" cellpadding="6" cellspacing="0">
    <tr><th>메뉴</th><th>수량</th><th>단가</th><th>금액</th></tr>
    <tr th:each="co : ${order.coffeeOrders}">
        <td th:text="${co.coffee.name}"></td>
        <td th:text="${co.quantity}"></td>
        <td th:text="${co.coffee.price}"></td>
        <td th:text="${co.coffee.price * co.quantity}"></td>
    </tr>
</table>

<p style="margin-top:12px">
    <b>총액&nbsp;:&nbsp;
        <span th:text="${#numbers.formatInteger(
            order.coffeeOrders.stream()
                              .mapToInt(co -> co.coffee.price * co.quantity)
                              .sum(), 0, 'COMMA')}"></span>원
    </b>
</p>
</body>
</html>
